{"version":3,"sources":["actions/requestActions.js","sipCaller.js","sessionStates.js","components/LoadingView.js","serviceWorker.js","components/Account/Account.js","components/SessionHistory/SessionHistory.js","components/Sessions/Sessions.js","components/Dialer/Dialer.js","components/SessionView/MediaView/MediaView.js","components/SessionView/SessionView.js","components/Notifications/Notifications.js","components/Notifications/SessionNotifications.js","components/App.js","index.js","sipCallerContext.js","actions/stateActions.js","logger.js","reducers/user.js","reducers/sessions.js","reducers/sessionHistory.js","reducers/userStatus.js","reducers/notifications.js","reducers/rootReducer.js","store.js"],"names":["notify","_ref","_ref$type","type","text","timeout","notification","id","randomString","length","toLowerCase","dispatch","stateActions","setTimeout","store","logger","Logger","SipCaller","Object","classCallCheck","this","debug","_ua","_init","data","getState","user","autoRegister","register","_this","_store$getState$user","displayName","sipUri","password","outboundProxy","iceServers","window","sip","uri","transportOptions","wsServers","traceSip","sessionDescriptionHandlerFactoryOptions","peerConnectionOptions","rtcConfiguration","on","requestActions","registrationMessage","registered","response","cause","concat","sipSession","remoteIdentity","_handleSession","sessionStates","unregister","direction","_this2","startTime","Date","now","pc","sessionDescriptionHandler","peerConnection","remoteStream","MediaStream","getReceivers","forEach","receiver","track","addTrack","localStream","getSenders","sender","newSipSession","context","sessionState","accept","getDirection","request","message","toString","userStatus","currentSession","sessions","keys","videoEnabled","sessionDescriptionHandlerOptions","constraints","audio","video","terminate","invite","callId","refer","mute","getAudioTracks","enabled","Error","getVideoTracks","session","__webpack_require__","d","__webpack_exports__","NEW","PROGRESS","REJECTED","ACCEPTED","CANCELED","FAILED","TERMINATED","REFER_REQUEST_ACCEPTED","REFER_REQUEST_REJECTED","INCOMING","OUTGOING","Symbol","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","LoadingView","a","createElement","className","isLocalhost","Boolean","location","hostname","match","config","navigator","URL","process","href","origin","addEventListener","swUrl","fetch","then","contentType","headers","get","status","indexOf","serviceWorker","ready","registration","reload","registerValidSW","catch","checkValidServiceWorker","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","withSipCallerContext","connect","setDisplayName","setSipUri","setPassword","setOutboundProxy","setAutoRegister","withStyles","theme","paper","padding","spacing","unit","width","props","sipCaller","classes","react_default","Paper_default","Grid_default","container","item","xs","Typography_default","variant","noWrap","Button_default","color","onClick","unRegister","TextField_default","label","value","style","onChange","event","target","FormControlLabel_default","control","Checkbox_default","checked","sessionHistory","setRequestUri","requestUri","List_default","map","entry","index","ListItem_default","key","button","ListItemText_default","primary","secondary","setCurrentSession","iconGreen","iconRed","answer","selected","disabled","IconButton_default","aria-label","Call_default","CallEnd_default","grid","call","defineProperty","position","borderRadius","shape","backgroundColor","fade","palette","common","white","&:hover","marginLeft","breakpoints","up","callIcon","height","pointerEvents","display","alignItems","justifyContent","inputRoot","inputInput","paddingTop","paddingRight","paddingBottom","paddingLeft","transition","transitions","create","InputBase_default","placeholder","root","input","onKeyPress","ev","preventDefault","autoFocus","MediaView","possibleConstructorReturn","getPrototypeOf","_mediaStream","videoView","ref","autoPlay","playsInline","mediaStream","_setStream","nextProps","refs","srcObject","Component","objectFit","SessionView","open","handleClickOpen","setState","handleClose","handleTransfer","_this$props","transferUri","_this$props2","setTransferUri","Card_default","card","CardContent_default","Divider_default","sessionView","SessionView_MediaView_MediaView","Dialog_default","onClose","aria-labelledby","DialogTitle_default","DialogContent_default","DialogContentText_default","margin","fullWidth","DialogActions_default","buttonList","Fab_default","size","toggleMedia","remoteAudioMuted","VolumeOff_default","VolumeUp_default","remoteVideoMuted","VideocamOff_default","Videocam_default","CallSplit_default","bottom","transform","left","textAlign","Notifications","displayed","storeDisplayed","toConsumableArray","_ref$notifications","notifications","newNotifications","currentNotifications","notExists","_loop","i","filter","_ref2","_this$props$notificat","includes","enqueueSnackbar","autoHideDuration","anchorOrigin","vertical","horizontal","removeNotification","withSnackbar","notificationId","incomingSessions","values","top","right","flexDirection","marginTop","CardActionArea_default","gutterBottom","component","CardActions_default","App","anchorEl","mobileMoreAnchorEl","currentMenu","handleExited","handleMenuOpen","menu","currentTarget","handleMenuClose","handleMobileMenuClose","handleMobileMenuOpen","_this$state","isMenuOpen","isMobileMenuOpen","components_SessionView_SessionView","components_Notifications_Notifications","Notifications_SessionNotifications","AppBar_default","background","boxShadow","Toolbar_default","title","components_Dialer_Dialer","grow","sectionDesktop","aria-owns","undefined","aria-haspopup","Badge_default","badgeContent","ViewCarousel_default","History_default","AccountCircle_default","sectionMobile","MoreVert_default","Popover_default","transformOrigin","onExited","getContentAnchorEl","components_Sessions_Sessions","components_SessionHistory_SessionHistory","components_Account_Account","Menu_default","MenuItem_default","flexGrow","r","global","domready__WEBPACK_IMPORTED_MODULE_0__","domready__WEBPACK_IMPORTED_MODULE_0___default","react__WEBPACK_IMPORTED_MODULE_1__","react__WEBPACK_IMPORTED_MODULE_1___default","react_dom__WEBPACK_IMPORTED_MODULE_2__","react_dom__WEBPACK_IMPORTED_MODULE_2___default","react_redux__WEBPACK_IMPORTED_MODULE_3__","redux_persist_lib_integration_react__WEBPACK_IMPORTED_MODULE_4__","_store__WEBPACK_IMPORTED_MODULE_5__","notistack__WEBPACK_IMPORTED_MODULE_6__","_logger__WEBPACK_IMPORTED_MODULE_8__","_sipCallerContext__WEBPACK_IMPORTED_MODULE_9__","_components_App__WEBPACK_IMPORTED_MODULE_11__","_components_LoadingView__WEBPACK_IMPORTED_MODULE_12__","_serviceWorker__WEBPACK_IMPORTED_MODULE_13__","_sipCaller__WEBPACK_IMPORTED_MODULE_14__","init","domready","ReactDOM","render","loading","persistor","Provider","document","getElementById","SipCallerContext","React","createContext","Consumer","assign","setRegistered","setRegisterInProgress","setRegistrationMessage","addSession","removeSession","addRemoteStream","addLocalStream","toggleRemoteAudio","toggleRemoteVideo","setSessionState","addSessionToHistory","addNotification","payload","_ref3","_ref4","_ref5","_ref6","_ref7","_ref8","_ref9","_ref10","_ref11","_ref12","_ref13","_ref14","_ref15","_ref16","_ref19","_ref20","_ref21","APP_NAME","prefix","_home_havfo_Utvikling_SipCaller_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","_debug","_warn","_error","log","console","info","bind","warn","error","initialState","arguments","action","_action$payload","objectSpread","localAudioMuted","localVideoMuted","omit","oldSession","registerInProgress","combineReducers","persistConfig","storage","stateReconciler","autoMergeLevel2","blacklist","reduxMiddlewares","thunk","pReducer","persistReducer","rootReducer","createStore","applyMiddleware","apply","persistStore"],"mappings":"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","file":"static/js/main.410ce508.chunk.js","sourcesContent":["import randomString from 'random-string';\nimport * as stateActions from './stateActions';\n\n// This returns a redux-thunk action (a function).\nexport const notify = ({ type = 'info', text, timeout }) =>\n{\n\tif (!timeout)\n\t{\n\t\tswitch (type)\n\t\t{\n\t\t\tcase 'warning':\n\t\t\tcase 'error':\n\t\t\t\ttimeout = 5000;\n\t\t\t\tbreak;\n\t\t\tcase 'success':\n\t\t\tcase 'info':\n\t\t\tdefault:\n\t\t\t\ttimeout = 3000;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tconst notification =\n\t{\n\t\tid      : randomString({ length: 6 }).toLowerCase(),\n\t\ttype    : type,\n\t\ttext    : text,\n\t\ttimeout : timeout\n\t};\n\n\treturn (dispatch) =>\n\t{\n\t\tdispatch(stateActions.addNotification(notification));\n\n\t\tsetTimeout(() =>\n\t\t{\n\t\t\tdispatch(stateActions.removeNotification(notification.id));\n\t\t}, timeout);\n\t};\n};","import * as sip from 'sip.js';\nimport * as stateActions from './actions/stateActions';\nimport * as requestActions from './actions/requestActions';\nimport * as sessionStates from './sessionStates';\nimport Logger from './logger';\n\nconst logger = new Logger('SipCaller');\n\nlet store;\n\nexport default class SipCaller\n{\n\t/**\n\t * @param  {Object} data\n\t * @param  {Object} data.store - The Redux store.\n\t */\n\tstatic init(data)\n\t{\n\t\tstore = data.store;\n\t}\n\n\tconstructor()\n\t{\n\t\tlogger.debug('constructor()');\n\n\t\tthis._ua = null;\n\n\t\tthis._init();\n\t}\n\n\t_init()\n\t{\n\t\tlogger.debug('_init()');\n\n\t\tconst { autoRegister } = store.getState().user;\n\n\t\tif (autoRegister)\n\t\t\tthis.register();\n\t}\n\n\tregister()\n\t{\n\t\tlogger.debug('register()');\n\n\t\tconst {\n\t\t\tdisplayName,\n\t\t\tsipUri,\n\t\t\tpassword,\n\t\t\toutboundProxy\n\t\t} = store.getState().user;\n\n\t\t// This is inserted in config.js in index.html\n\t\tconst iceServers = window.iceServers;\n\n\t\tstore.dispatch(stateActions.setRegisterInProgress());\n\n\t\tthis._ua = new sip.UA({\n\t\t\turi              : sipUri,\n\t\t\tpassword         : password,\n\t\t\tdisplayName      : displayName,\n\t\t\ttransportOptions : {\n\t\t\t\twsServers : [ outboundProxy ],\n\t\t\t\ttraceSip  : true\n\t\t\t},\n\t\t\tsessionDescriptionHandlerFactoryOptions : {\n\t\t\t\tpeerConnectionOptions : {\n\t\t\t\t\trtcConfiguration : {\n\t\t\t\t\t\ticeServers\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis._ua.on('registered', () =>\n\t\t{\n\t\t\tlogger.debug('Registered');\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'success',\n\t\t\t\t\ttext : 'Successfully registered.'\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tstore.dispatch(stateActions.setRegistrationMessage({ registrationMessage: 'Success' }));\n\t\t\tstore.dispatch(stateActions.setRegistered({ registered: true }));\n\t\t});\n\n\t\tthis._ua.on('registrationFailed', (response, cause) =>\n\t\t{\n\t\t\tlogger.debug('Registration failed [cause: %s]', cause);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttype : 'error',\n\t\t\t\t\ttext : `Registration failed: ${cause}`\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tstore.dispatch(stateActions.setRegistrationMessage({ registrationMessage: cause }));\n\t\t\tstore.dispatch(stateActions.setRegistered({ registered: false }));\n\t\t});\n\n\t\tthis._ua.on('unregistered', (response, cause) =>\n\t\t{\n\t\t\tlogger.debug('Unregistered [cause: %s]', cause);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : `Unregistered: ${cause}`\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tstore.dispatch(stateActions.setRegistrationMessage({ registrationMessage: cause }));\n\t\t\tstore.dispatch(stateActions.setRegistered({ registered: false }));\n\t\t});\n\n\t\tthis._ua.on('invite', (sipSession) =>\n\t\t{\n\t\t\tlogger.debug('Incoming invite [sipSession: %o]', sipSession);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : `Incoming call from: ${sipSession.remoteIdentity.uri.user}`\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tthis._handleSession(sipSession, sessionStates.INCOMING);\n\t\t});\n\t}\n\n\tunRegister()\n\t{\n\t\tlogger.debug('unRegister()');\n\n\t\tthis._ua.unregister();\n\t}\n\n\t_handleSession(sipSession, direction)\n\t{\n\t\tlogger.debug('_handleSession() [sipSession: %o]', sipSession);\n\n\t\tconst startTime = Date.now();\n\n\t\tsipSession.on('trackAdded', () =>\n\t\t{\n\t\t\tlogger.debug('SipSession trackAdded [sipSession: %o]', sipSession);\n\n\t\t\tconst pc = sipSession.sessionDescriptionHandler.peerConnection;\n\n\t\t\t// Gets remote tracks\n\t\t\tconst remoteStream = new MediaStream();\n\n\t\t\tpc.getReceivers().forEach((receiver) =>\n\t\t\t{\n\t\t\t\tif (receiver.track)\n\t\t\t\t\tremoteStream.addTrack(receiver.track);\n\t\t\t});\n\n\t\t\tstore.dispatch(stateActions.addRemoteStream({ sipSession, remoteStream }));\n\n\t\t\t// Gets local tracks\n\t\t\tconst localStream = new MediaStream();\n\n\t\t\tpc.getSenders().forEach((sender) =>\n\t\t\t{\n\t\t\t\tif (sender.track)\n\t\t\t\t\tlocalStream.addTrack(sender.track);\n\t\t\t});\n\n\t\t\tstore.dispatch(stateActions.addLocalStream({ sipSession, localStream }));\n\t\t});\n\n\t\tsipSession.on('replaced', (newSipSession) =>\n\t\t{\n\t\t\tlogger.debug('SipSession replaced [oldSipSession: %o, newSipSession: %o]', sipSession, newSipSession);\n\n\t\t\tthis._handleSession(newSipSession, direction);\n\t\t});\n\n\t\tsipSession.on('referRequested', (context) =>\n\t\t{\n\t\t\t// Outgoing REFER\n\t\t\tif (context instanceof sip.ReferClientContext)\n\t\t\t{\n\t\t\t\tcontext.on('referRequestAccepted', () =>\n\t\t\t\t{\n\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\tstateActions.setSessionState({\n\t\t\t\t\t\t\tsipSession,\n\t\t\t\t\t\t\tsessionState : sessionStates.REFER_REQUEST_ACCEPTED\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t});\n\n\t\t\t\tcontext.on('referRequestRejected', () =>\n\t\t\t\t{\n\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\tstateActions.setSessionState({\n\t\t\t\t\t\t\tsipSession,\n\t\t\t\t\t\t\tsessionState : sessionStates.REFER_REQUEST_REJECTED\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Incoming REFER\n\t\t\tif (context instanceof sip.ReferServerContext)\n\t\t\t{\n\t\t\t\tcontext.accept();\n\t\t\t}\n\t\t});\n\n\t\tsipSession.on('directionChanged', () =>\n\t\t{\n\t\t\tconst newDirection = sipSession.sessionDescriptionHandler.getDirection();\n\n\t\t\tif (newDirection === 'sendrecv')\n\t\t\t{\n\t\t\t\tlogger.debug('SipSession not on hold [sipSession: %o]', sipSession);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlogger.debug('SipSession on hold [sipSession: %o]', sipSession);\n\t\t\t}\n\t\t});\n\n\t\tsipSession.on('progress', (response) =>\n\t\t{\n\t\t\tlogger.debug('SipSession progress [response: %o, sipSession: %o]', response, sipSession);\n\n\t\t\tstore.dispatch(\n\t\t\t\tstateActions.setSessionState({\n\t\t\t\t\tsipSession,\n\t\t\t\t\tsessionState : sessionStates.PROGRESS\n\t\t\t\t})\n\t\t\t);\n\t\t});\n\n\t\tsipSession.on('accepted', (data) =>\n\t\t{\n\t\t\tlogger.debug('SipSession accepted [data: %o, sipSession: %o]', data, sipSession);\n\n\t\t\tstore.dispatch(\n\t\t\t\tstateActions.setSessionState({\n\t\t\t\t\tsipSession,\n\t\t\t\t\tsessionState : sessionStates.ACCEPTED\n\t\t\t\t})\n\t\t\t);\n\t\t});\n\n\t\tsipSession.on('bye', (request) =>\n\t\t{\n\t\t\tlogger.debug('SipSession bye [request: %o, sipSession: %o]', request, sipSession);\n\n\t\t\tstore.dispatch(\n\t\t\t\tstateActions.setSessionState({\n\t\t\t\t\tsipSession,\n\t\t\t\t\tsessionState : sessionStates.TERMINATED\n\t\t\t\t})\n\t\t\t);\n\t\t});\n\n\t\tsipSession.on('cancel', () =>\n\t\t{\n\t\t\tlogger.debug('SipSession canceled [sipSession: %o]', sipSession);\n\n\t\t\tstore.dispatch(\n\t\t\t\tstateActions.setSessionState({\n\t\t\t\t\tsipSession,\n\t\t\t\t\tsessionState : sessionStates.CANCELED\n\t\t\t\t})\n\t\t\t);\n\t\t});\n\n\t\tsipSession.on('rejected', (response, cause) =>\n\t\t{\n\t\t\tlogger.debug(\n\t\t\t\t'SipSession rejected [response: %o, cause: %s, sipSession: %o]',\n\t\t\t\tresponse,\n\t\t\t\tcause,\n\t\t\t\tsipSession\n\t\t\t);\n\n\t\t\tstore.dispatch(\n\t\t\t\tstateActions.setSessionState({\n\t\t\t\t\tsipSession,\n\t\t\t\t\tsessionState : sessionStates.REJECTED\n\t\t\t\t})\n\t\t\t);\n\t\t});\n\n\t\tsipSession.on('failed', (response, cause) =>\n\t\t{\n\t\t\tlogger.debug(\n\t\t\t\t'SipSession failed [response: %o, cause: %s, sipSession: %o]',\n\t\t\t\tresponse,\n\t\t\t\tcause,\n\t\t\t\tsipSession\n\t\t\t);\n\n\t\t\tstore.dispatch(\n\t\t\t\tstateActions.setSessionState({\n\t\t\t\t\tsipSession,\n\t\t\t\t\tsessionState : sessionStates.FAILED\n\t\t\t\t})\n\t\t\t);\n\t\t});\n\n\t\tsipSession.on('terminated', (message, cause) =>\n\t\t{\n\t\t\tlogger.debug(\n\t\t\t\t'SipSession terminated [message: %o, cause: %s, sipSession: %o]',\n\t\t\t\tmessage,\n\t\t\t\tcause,\n\t\t\t\tsipSession\n\t\t\t);\n\n\t\t\tstore.dispatch(requestActions.notify(\n\t\t\t\t{\n\t\t\t\t\ttext : `Call terminated: ${sipSession.remoteIdentity.uri.user}`\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tstore.dispatch(\n\t\t\t\tstateActions.setSessionState({\n\t\t\t\t\tsipSession,\n\t\t\t\t\tsessionState : sessionStates.TERMINATED\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tconst displayName =\n\t\t\t\tsipSession.remoteIdentity.displayName ||\n\t\t\t\tsipSession.remoteIdentity.uri.user;\n\t\t\tconst sipUri = sipSession.remoteIdentity.uri.toString();\n\n\t\t\tstore.dispatch(\n\t\t\t\tstateActions.addSessionToHistory({\n\t\t\t\t\tdisplayName,\n\t\t\t\t\tsipUri,\n\t\t\t\t\tstartTime\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tsetTimeout(() =>\n\t\t\t{\n\t\t\t\tlogger.debug('SipSession removed [sipSession: %o]', sipSession);\n\n\t\t\t\tstore.dispatch(stateActions.removeSession({ sipSession }));\n\n\t\t\t\tif (!store.getState().userStatus.currentSession)\n\t\t\t\t{\n\t\t\t\t\tconst sessions = store.getState().sessions;\n\n\t\t\t\t\tif (sessions)\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.dispatch(\n\t\t\t\t\t\t\tstateActions.setCurrentSession({\n\t\t\t\t\t\t\t\tcurrentSession : Object.keys(sessions)[0]\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, 3000);\n\t\t});\n\n\t\tstore.dispatch(stateActions.addSession({ sipSession, direction }));\n\t}\n\n\taccept(sipSession)\n\t{\n\t\tlogger.debug('accept() [sipSession: %o]', sipSession);\n\n\t\tconst {\n\t\t\tvideoEnabled\n\t\t} = store.getState().user;\n\n\t\tsipSession.accept({\n\t\t\tsessionDescriptionHandlerOptions :\n\t\t\t{\n\t\t\t\tconstraints :\n\t\t\t\t{\n\t\t\t\t\taudio : true,\n\t\t\t\t\tvideo : videoEnabled\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tterminate(sipSession)\n\t{\n\t\tlogger.debug('terminate() [sipSession: %o]', sipSession);\n\n\t\tsipSession.terminate();\n\t}\n\n\tinvite(sipUri)\n\t{\n\t\tlogger.debug('invite() [sipUri: %s]', sipUri);\n\n\t\tconst {\n\t\t\tvideoEnabled\n\t\t} = store.getState().user;\n\n\t\tconst sipSession = this._ua.invite(sipUri, {\n\t\t\tsessionDescriptionHandlerOptions :\n\t\t\t{\n\t\t\t\tconstraints :\n\t\t\t\t{\n\t\t\t\t\taudio : true,\n\t\t\t\t\tvideo : videoEnabled\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis._handleSession(sipSession, sessionStates.OUTGOING);\n\t\tstore.dispatch(\n\t\t\tstateActions.setCurrentSession({\n\t\t\t\tcurrentSession : sipSession.request.callId\n\t\t\t})\n\t\t);\n\t}\n\n\trefer(sipSession, sipUri)\n\t{\n\t\tlogger.debug(\n\t\t\t'refer() [sipSession: %o, sipUri: %s]',\n\t\t\tsipSession,\n\t\t\tsipUri\n\t\t);\n\n\t\tsipSession.refer(sipUri);\n\t}\n\n\ttoggleMedia(sipSession, type, mute)\n\t{\n\t\tlogger.debug(\n\t\t\t'toggleMedia() [sipSession: %o, type: %s, mute: %s]',\n\t\t\tsipSession,\n\t\t\ttype,\n\t\t\tmute\n\t\t);\n\n\t\tconst callId = sipSession.request.callId;\n\t\tconst remoteStream = store.getState().sessions[callId].remoteStream;\n\n\t\tif (!remoteStream) return;\n\n\t\tif (type === 'audio')\n\t\t{\n\t\t\tremoteStream.getAudioTracks()[0].enabled = !mute;\n\n\t\t\tstore.dispatch(\n\t\t\t\tstateActions.toggleRemoteAudio({\n\t\t\t\t\tsipSession\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t\telse if (type === 'video')\n\t\t{\n\t\t\tremoteStream.getVideoTracks()[0].enabled = !mute;\n\n\t\t\tstore.dispatch(\n\t\t\t\tstateActions.toggleRemoteVideo({\n\t\t\t\t\tsipSession\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthrow new Error('Unknown media type.');\n\t\t}\n\t}\n\n\ttoggleMyMedia(session, type, mute)\n\t{\n\t\tlogger.debug(\n\t\t\t'toggleMyMedia() [session: %o, type: %s, mute: %s]',\n\t\t\tsession,\n\t\t\ttype,\n\t\t\tmute\n\t\t);\n\n\t\tif (type === 'audio')\n\t\t{\n\t\t\tsession.localStream.getAudioTracks()[0].enabled = !mute;\n\t\t}\n\t\telse if (type === 'video')\n\t\t{\n\t\t\tsession.localStream.getVideoTracks()[0].enabled = !mute;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthrow new Error('Unknown media type.');\n\t\t}\n\t}\n}","export const NEW = Symbol('NEW'); // Session created (incoming/outgoing)\nexport const PROGRESS = Symbol('PROGRESS'); // Session progress (100-199, outgoing)\nexport const REJECTED = Symbol('REJECTED'); // Session rejected (300-699, outgoing)\nexport const IGNORED = Symbol('IGNORED'); // Session ignored (incoming)\nexport const ACCEPTED = Symbol('ACCEPTED'); // Session accepted (200-299, outgoing/incoming)\nexport const CANCELED = Symbol('CANCELED'); // Session canceled (outgoing)\nexport const FAILED = Symbol('FAILED'); // Session failed (incoming/outgoing)\nexport const TERMINATED = Symbol('TERMINATED'); // Session terminated (incoming/outgoing)\n\nexport const REFERRED = Symbol('REFERRED'); // Incoming REFER\nexport const REFER_REQUEST_ACCEPTED = Symbol('REFER_REQUEST_ACCEPTED'); // Refer accepted by remote party\nexport const REFER_REQUEST_REJECTED = Symbol('REFER_REQUEST_REJECTED'); // Refer rejected by remote party\nexport const REFER_PROGRESS = Symbol('REFER_PROGRESS'); // Refer progress from third party\nexport const REFER_ACCEPTED = Symbol('REFER_ACCEPTED'); // Refer answered by third party\nexport const REFER_REJECTED = Symbol('REFER_REJECTED'); // Refer rejected by third party\n\nexport const INCOMING = Symbol('INCOMING'); // Incoming session\nexport const OUTGOING = Symbol('OUTGOING'); // Outgoing session","import React from 'react';\n\nimport './LoadingView.css';\n\nconst LoadingView = () =>\n{\n\treturn (\n\t\t<div className='LoadingView' />\n\t);\n};\n\nexport default LoadingView;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n\twindow.location.hostname === 'localhost' ||\n\t// [::1] is the IPv6 localhost address.\n\twindow.location.hostname === '[::1]' ||\n\t// 127.0.0.1/8 is considered localhost for IPv4.\n\twindow.location.hostname.match(\n\t\t/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n\t)\n);\n\nexport function register(config) \n{\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator)\n\t{\n\t\t// The URL constructor is available in all browsers that support SW.\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n\n\t\tif (publicUrl.origin !== window.location.origin)\n\t\t{\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\n\t\t\treturn;\n\t\t}\n\n\t\twindow.addEventListener('load', () =>\n\t\t{\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n\t\t\tif (isLocalhost)\n\t\t\t{\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\n\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\n\t\t\t\t// service worker/PWA documentation.\n\t\t\t\tnavigator.serviceWorker.ready.then(() =>\n\t\t\t\t{\n\t\t\t\t\t\n\t\t\t\t\t// This web app is being served cache-first by a service\n\t\t\t\t\t// worker. To learn more, visit http://bit.ly/CRA-PWA\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// Is not localhost. Just register service worker\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction registerValidSW(swUrl, config)\n{\n\tnavigator.serviceWorker\n\t\t.register(swUrl)\n\t\t.then((registration) =>\n\t\t{\n\t\t\tregistration.onupdatefound = () =>\n\t\t\t{\n\t\t\t\tconst installingWorker = registration.installing;\n\n\t\t\t\tif (installingWorker == null)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tinstallingWorker.onstatechange = () =>\n\t\t\t\t{\n\t\t\t\t\tif (installingWorker.state === 'installed')\n\t\t\t\t\t{\n\t\t\t\t\t\tif (navigator.serviceWorker.controller)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\n\t\t\t\t\t\t\t// content until all client tabs are closed.\n\n\t\t\t\t\t\t\t// New content is available and will be used when all\n\t\t\t\t\t\t\t// tabs for this page are closed. See http://bit.ly/CRA-PWA.\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onUpdate)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (config && config.onSuccess)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// At this point, everything has been precached.\n\t\t\t\t\t\t\t// It's the perfect time to display a\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// Content is cached for offline use.\n\n\t\t\t\t\t\t\t// Execute callback\n\n\t\t\t\t\t\t\tconfig.onSuccess(registration);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\t\t})\n\t\t.catch(() =>\n\t\t{\n\t\t\t// Error during service worker registration\n\t\t});\n}\n\nfunction checkValidServiceWorker(swUrl, config)\n{\n\t// Check if the service worker can be found. If it can't reload the page.\n\tfetch(swUrl)\n\t\t.then((response) =>\n\t\t{\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\n\t\t\tconst contentType = response.headers.get('content-type');\n\n\t\t\tif (\n\t\t\t\tresponse.status === 404 ||\n\t\t\t\t(contentType != null && contentType.indexOf('javascript') === -1)\n\t\t\t) \n\t\t\t{\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\n\t\t\t\tnavigator.serviceWorker.ready.then((registration) => \n\t\t\t\t{\n\t\t\t\t\tregistration.unregister().then(() => \n\t\t\t\t\t{\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\telse \n\t\t\t{\n\t\t\t\t// Service worker found. Proceed as normal.\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t})\n\t\t.catch(() => \n\t\t{\n\t\t\t// No internet connection found. App is running in offline mode.\n\t\t});\n}\n\nexport function unregister() \n{\n\tif ('serviceWorker' in navigator) \n\t{\n\t\tnavigator.serviceWorker.ready.then((registration) => \n\t\t{\n\t\t\tregistration.unregister();\n\t\t});\n\t}\n}\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { withSipCallerContext } from '../../sipCallerContext';\nimport { withStyles } from '@material-ui/core/styles';\nimport * as stateActions from '../../actions/stateActions';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Typography from '@material-ui/core/Typography';\n\nconst styles = (theme) =>\n\t({\n\t\tpaper :\n\t\t{\n\t\t\tpadding : theme.spacing.unit * 2,\n\t\t\twidth   : '20vw'\n\t\t}\n\t});\n\nconst Account = (props) =>\n{\n\tconst {\n\t\tsipCaller,\n\t\tdisplayName,\n\t\tsipUri,\n\t\tpassword,\n\t\toutboundProxy,\n\t\tautoRegister,\n\t\tsetDisplayName,\n\t\tsetSipUri,\n\t\tsetPassword,\n\t\tsetOutboundProxy,\n\t\tsetAutoRegister,\n\t\tregistered,\n\t\tclasses\n\t} = props;\n\n\treturn (\n\t\t<Paper className={classes.paper}>\n\t\t\t{ !registered ?\n\t\t\t\t<Grid container spacing={8}>\n\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tid='displayname'\n\t\t\t\t\t\t\tlabel='Displayname'\n\t\t\t\t\t\t\tvalue={displayName || ''}\n\t\t\t\t\t\t\tstyle={{ width: '100%' }}\n\t\t\t\t\t\t\tonChange={(event) => setDisplayName(event.target.value)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tid='sipuri'\n\t\t\t\t\t\t\tlabel='SIP URI'\n\t\t\t\t\t\t\ttype='email'\n\t\t\t\t\t\t\tvalue={sipUri || ''}\n\t\t\t\t\t\t\tstyle={{ width: '100%' }}\n\t\t\t\t\t\t\tonChange={(event) => setSipUri(event.target.value)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tid='password'\n\t\t\t\t\t\t\tlabel='Password'\n\t\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\t\tvalue={password || ''}\n\t\t\t\t\t\t\tstyle={{ width: '100%' }}\n\t\t\t\t\t\t\tonChange={(event) => setPassword(event.target.value)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tid='outboundproxy'\n\t\t\t\t\t\t\tlabel='Outbound Proxy'\n\t\t\t\t\t\t\tvalue={outboundProxy || ''}\n\t\t\t\t\t\t\tstyle={{ width: '100%' }}\n\t\t\t\t\t\t\tonChange={(event) => setOutboundProxy(event.target.value)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\t\tchecked={autoRegister}\n\t\t\t\t\t\t\t\t\tonChange={() => setAutoRegister(!autoRegister)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlabel='Autoregister'\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\tonClick={() => sipCaller.register()}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tRegister\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t\t:<Grid container spacing={8}>\n\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t<Typography variant='body1' noWrap>\n\t\t\t\t\t\t\t{ displayName }\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Typography noWrap>\n\t\t\t\t\t\t\t{ sipUri }\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Typography variant='caption' noWrap>\n\t\t\t\t\t\t\tRegistered\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\t\tcolor='secondary'\n\t\t\t\t\t\t\tonClick={() => sipCaller.unRegister()}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tUnregister\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t}\n\t\t</Paper>\n\t);\n};\n\nAccount.propTypes =\n{\n\tsipCaller        : PropTypes.any.isRequired,\n\tdisplayName      : PropTypes.string,\n\tsipUri           : PropTypes.string,\n\tpassword         : PropTypes.string,\n\toutboundProxy    : PropTypes.string,\n\tautoRegister     : PropTypes.bool,\n\tsetDisplayName   : PropTypes.func.isRequired,\n\tsetSipUri        : PropTypes.func.isRequired,\n\tsetPassword      : PropTypes.func.isRequired,\n\tsetOutboundProxy : PropTypes.func.isRequired,\n\tsetAutoRegister  : PropTypes.func.isRequired,\n\tregistered       : PropTypes.bool.isRequired,\n\tclasses          : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\tdisplayName   : state.user.displayName,\n\t\tsipUri        : state.user.sipUri,\n\t\tpassword      : state.user.password,\n\t\toutboundProxy : state.user.outboundProxy,\n\t\tautoRegister  : state.user.autoRegister,\n\t\tregistered    : state.userStatus.registered\n\t});\n\nconst mapDispatchToProps = (dispatch) =>\n\t({\n\t\tsetDisplayName : (displayName) => dispatch(\n\t\t\tstateActions.setDisplayName({ displayName })),\n\t\tsetSipUri : (sipUri) => dispatch(\n\t\t\tstateActions.setSipUri({ sipUri })),\n\t\tsetPassword : (password) => dispatch(\n\t\t\tstateActions.setPassword({ password })),\n\t\tsetOutboundProxy : (outboundProxy) => dispatch(\n\t\t\tstateActions.setOutboundProxy({ outboundProxy })),\n\t\tsetAutoRegister : (autoRegister) => dispatch(\n\t\t\tstateActions.setAutoRegister({ autoRegister }))\n\t});\n\nexport default withSipCallerContext(\n\tconnect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(Account))\n);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport * as stateActions from '../../actions/stateActions';\nimport { withStyles } from '@material-ui/core/styles';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\n\nconst styles = (theme) =>\n\t({\n\t\tpaper :\n\t\t{\n\t\t\tpadding : theme.spacing.unit * 2\n\t\t}\n\t});\n\nconst SessionHistory = (props) =>\n{\n\tconst {\n\t\tsessionHistory,\n\t\tsetRequestUri,\n\t\tclasses\n\t} = props;\n\n\treturn (\n\t\t<Paper className={classes.paper}>\n\t\t\t{ sessionHistory.length > 0 ?\n\t\t\t\t<List>\n\t\t\t\t\t{ sessionHistory.map((entry, index) =>\n\t\t\t\t\t{\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<ListItem\n\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\tbutton\n\t\t\t\t\t\t\t\tonClick={() => setRequestUri(entry.sipUri)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ListItemText\n\t\t\t\t\t\t\t\t\tprimary={entry.displayName}\n\t\t\t\t\t\t\t\t\tsecondary={entry.sipUri}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</List>\n\t\t\t\t:\n\t\t\t\t<Typography\n\t\t\t\t\tcolor='inherit'\n\t\t\t\t\tnoWrap\n\t\t\t\t>\n\t\t\t\t\tNo history\n\t\t\t\t</Typography>\n\t\t\t}\n\t\t</Paper>\n\t);\n};\n\nSessionHistory.propTypes =\n{\n\tsessionHistory : PropTypes.array.isRequired,\n\tsetRequestUri  : PropTypes.func.isRequired,\n\tclasses        : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\tsessionHistory : state.sessionHistory\n\t});\n\nconst mapDispatchToProps = (dispatch) =>\n\t({\n\t\tsetRequestUri : (requestUri) => dispatch(\n\t\t\tstateActions.setRequestUri({ requestUri }))\n\t});\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(withStyles(styles)(SessionHistory));\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport * as stateActions from '../../actions/stateActions';\nimport * as sessionStates from '../../sessionStates';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withSipCallerContext } from '../../sipCallerContext';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport CallIcon from '@material-ui/icons/Call';\nimport CallEndIcon from '@material-ui/icons/CallEnd';\nimport Paper from '@material-ui/core/Paper';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\n\nconst styles = (theme) =>\n\t({\n\t\tpaper :\n\t\t{\n\t\t\tpadding : theme.spacing.unit * 2\n\t\t},\n\t\ticonGreen :\n\t\t{\n\t\t\tcolor : 'green'\n\t\t},\n\t\ticonRed :\n\t\t{\n\t\t\tcolor : 'red'\n\t\t}\n\t});\n\nconst Sessions = (props) =>\n{\n\tconst {\n\t\tsipCaller,\n\t\tsessions,\n\t\tcurrentSession,\n\t\tsetCurrentSession,\n\t\tclasses\n\t} = props;\n\n\treturn (\n\t\t<Paper className={classes.paper}>\n\t\t\t{ Object.keys(sessions).length > 0 ?\n\t\t\t\t<List>\n\t\t\t\t\t{ Object.keys(sessions).map((callId) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tconst session = sessions[callId];\n\t\t\t\t\t\tconst sipSession = session.sipSession;\n\t\t\t\t\t\tconst displayName = \n\t\t\t\t\t\t\tsipSession.remoteIdentity.displayName ||\n\t\t\t\t\t\t\tsipSession.remoteIdentity.uri.user;\n\t\t\t\t\t\tconst sipUri = sipSession.remoteIdentity.uri.toString();\n\t\t\t\t\t\tconst answer =\n\t\t\t\t\t\t\tsession.direction === sessionStates.INCOMING &&\n\t\t\t\t\t\t\tsession.sessionState === sessionStates.NEW;\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<ListItem\n\t\t\t\t\t\t\t\tkey={callId}\n\t\t\t\t\t\t\t\tbutton\n\t\t\t\t\t\t\t\tselected={callId === currentSession}\n\t\t\t\t\t\t\t\tonClick={() => setCurrentSession(callId)}\n\t\t\t\t\t\t\t\tdisabled={session.sessionState === sessionStates.TERMINATED}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ListItemText\n\t\t\t\t\t\t\t\t\tprimary={displayName}\n\t\t\t\t\t\t\t\t\tsecondary={sipUri}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\tclassName={answer ? classes.iconGreen : classes.iconRed}\n\t\t\t\t\t\t\t\t\taria-label='Answer'\n\t\t\t\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\t\t\t\t() =>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tif (answer)\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tsipCaller.accept(sipSession);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tsipCaller.terminate(sipSession);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ answer ?\n\t\t\t\t\t\t\t\t\t\t<CallIcon />\n\t\t\t\t\t\t\t\t\t\t:<CallEndIcon />\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</List>\n\t\t\t\t:\n\t\t\t\t<Typography\n\t\t\t\t\tcolor='inherit'\n\t\t\t\t\tnoWrap\n\t\t\t\t>\n\t\t\t\t\tNo sessions\n\t\t\t\t</Typography>\n\t\t\t}\n\t\t</Paper>\n\t);\n};\n\nSessions.propTypes =\n{\n\tsipCaller         : PropTypes.object.isRequired,\n\tsessions          : PropTypes.object.isRequired,\n\tcurrentSession    : PropTypes.string,\n\tsetCurrentSession : PropTypes.func.isRequired,\n\tclasses           : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\tsessions       : state.sessions,\n\t\tcurrentSession : state.userStatus.currentSession\n\t});\n\nconst mapDispatchToProps = (dispatch) =>\n\t({\n\t\tsetCurrentSession : (callId) => dispatch(\n\t\t\tstateActions.setCurrentSession({ currentSession: callId }))\n\t});\n\nexport default withSipCallerContext(\n\tconnect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(Sessions))\n);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { withSipCallerContext } from '../../sipCallerContext';\nimport { withStyles } from '@material-ui/core/styles';\nimport * as stateActions from '../../actions/stateActions';\nimport { fade } from '@material-ui/core/styles/colorManipulator';\nimport Grid from '@material-ui/core/Grid';\nimport InputBase from '@material-ui/core/InputBase';\nimport Button from '@material-ui/core/Button';\nimport CallIcon from '@material-ui/icons/Call';\n\nconst styles = (theme) =>\n\t({\n\t\tgrid :\n\t\t{\n\t\t\twidth : '50vw'\n\t\t},\n\t\tcall :\n\t\t{\n\t\t\tposition        : 'relative',\n\t\t\tborderRadius    : theme.shape.borderRadius,\n\t\t\tbackgroundColor : fade(theme.palette.common.white, 0.15),\n\t\t\t'&:hover'       : {\n\t\t\t\tbackgroundColor : fade(theme.palette.common.white, 0.25)\n\t\t\t},\n\t\t\t// marginRight                  : theme.spacing.unit * 2,\n\t\t\tmarginLeft                   : 0,\n\t\t\twidth                        : '100%',\n\t\t\t[theme.breakpoints.up('sm')] : {\n\t\t\t\tmarginLeft : theme.spacing.unit * 3,\n\t\t\t\twidth      : 'auto'\n\t\t\t}\n\t\t},\n\t\tcallIcon :\n\t\t{\n\t\t\twidth          : theme.spacing.unit * 5,\n\t\t\theight         : '100%',\n\t\t\tposition       : 'absolute',\n\t\t\tpointerEvents  : 'none',\n\t\t\tdisplay        : 'flex',\n\t\t\talignItems     : 'center',\n\t\t\tjustifyContent : 'center'\n\t\t},\n\t\tinputRoot :\n\t\t{\n\t\t\tcolor : 'inherit',\n\t\t\twidth : '100%'\n\t\t},\n\t\tinputInput :\n\t\t{\n\t\t\tpaddingTop                   : theme.spacing.unit,\n\t\t\tpaddingRight                 : theme.spacing.unit,\n\t\t\tpaddingBottom                : theme.spacing.unit,\n\t\t\tpaddingLeft                  : theme.spacing.unit * 5,\n\t\t\ttransition                   : theme.transitions.create('width'),\n\t\t\twidth                        : '100%',\n\t\t\t[theme.breakpoints.up('md')] : {\n\t\t\t\twidth : '100%'\n\t\t\t}\n\t\t}\n\t});\n\nconst Dialer = (props) =>\n{\n\tconst {\n\t\tsipCaller,\n\t\trequestUri,\n\t\tregistered,\n\t\tsetRequestUri,\n\t\tclasses\n\t} = props;\n\n\treturn (\n\t\t<Grid className={classes.grid} container spacing={8}>\n\t\t\t<Grid item xs={9}>\n\t\t\t\t<div className={classes.call}>\n\t\t\t\t\t<div className={classes.callIcon}>\n\t\t\t\t\t\t<CallIcon />\n\t\t\t\t\t</div>\n\t\t\t\t\t<InputBase\n\t\t\t\t\t\tplaceholder='SIP URI'\n\t\t\t\t\t\tclasses={{\n\t\t\t\t\t\t\troot  : classes.inputRoot,\n\t\t\t\t\t\t\tinput : classes.inputInput\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tvalue={requestUri || ''}\n\t\t\t\t\t\tonChange={(event) => setRequestUri(event.target.value)}\n\t\t\t\t\t\tonKeyPress={(ev) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (ev.key === 'Enter')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tev.preventDefault();\n\n\t\t\t\t\t\t\t\tsipCaller.invite(requestUri);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</Grid>\n\t\t\t<Grid item xs={3}>\n\t\t\t\t<Button\n\t\t\t\t\tvariant='contained'\n\t\t\t\t\tcolor='primary'\n\t\t\t\t\tdisabled={!registered}\n\t\t\t\t\tonClick={() => sipCaller.invite(requestUri)}\n\t\t\t\t>\n\t\t\t\t\tCall\n\t\t\t\t</Button>\n\t\t\t</Grid>\n\t\t</Grid>\n\t);\n};\n\nDialer.propTypes =\n{\n\tsipCaller     : PropTypes.any.isRequired,\n\trequestUri    : PropTypes.string,\n\tregistered    : PropTypes.bool.isRequired,\n\tsetRequestUri : PropTypes.func.isRequired,\n\tclasses       : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\trequestUri : state.user.requestUri,\n\t\tregistered : state.userStatus.registered\n\t});\n\nconst mapDispatchToProps = (dispatch) =>\n\t({\n\t\tsetRequestUri : (requestUri) => dispatch(\n\t\t\tstateActions.setRequestUri({ requestUri }))\n\t});\n\nexport default withSipCallerContext(\n\tconnect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(Dialer))\n);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nconst styles = () =>\n\t({\n\t\tvideoView :\n\t\t{\n\t\t\tobjectFit : 'cover',\n\t\t\twidth     : '100%',\n\t\t\theight    : '100%'\n\t\t}\n\t});\n\nclass MediaView extends Component\n{\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\n\t\tthis._mediaStream = null;\n\t}\n\n\trender()\n\t{\n\t\tconst { classes } = this.props;\n\n\t\treturn (\n\t\t\t<video\n\t\t\t\tclassName={classes.videoView}\n\t\t\t\tref='video'\n\t\t\t\tautoPlay\n\t\t\t\tplaysInline\n\t\t\t/>\n\t\t);\n\t}\n\n\tcomponentDidMount()\n\t{\n\t\tconst { mediaStream } = this.props;\n\n\t\tthis._setStream(mediaStream);\n\t}\n\n\tcomponentWillReceiveProps(nextProps)\n\t{\n\t\tconst { mediaStream } = nextProps;\n\n\t\tthis._setStream(mediaStream);\n\n\t}\n\n\t_setStream(mediaStream)\n\t{\n\t\tif (this._mediaStream === mediaStream) return;\n\n\t\tthis._mediaStream = mediaStream;\n\n\t\tconst { video } = this.refs;\n\n\t\tif (mediaStream)\n\t\t{\n\t\t\tvideo.srcObject = mediaStream;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvideo.srcObject = null;\n\t\t}\n\t}\n}\n\nMediaView.propTypes =\n{\n\tmediaStream : PropTypes.any,\n\tclasses     : PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(MediaView);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { withSipCallerContext } from '../../sipCallerContext';\nimport { withStyles } from '@material-ui/core/styles';\nimport * as stateActions from '../../actions/stateActions';\nimport * as sessionStates from '../../sessionStates';\nimport MediaView from './MediaView/MediaView';\nimport Typography from '@material-ui/core/Typography';\nimport Fab from '@material-ui/core/Fab';\nimport TransferIcon from '@material-ui/icons/CallSplit';\nimport VideoIcon from '@material-ui/icons/Videocam';\nimport VideoOffIcon from '@material-ui/icons/VideocamOff';\nimport CallEndIcon from '@material-ui/icons/CallEnd';\nimport AudioIcon from '@material-ui/icons/VolumeUp';\nimport AudioOffIcon from '@material-ui/icons/VolumeOff';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Divider from '@material-ui/core/Divider';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Button from '@material-ui/core/Button';\n\nconst styles = (theme) =>\n\t({\n\t\tbutton :\n\t\t{\n\t\t\tmargin : theme.spacing.unit\n\t\t},\n\t\tbuttonList :\n\t\t{\n\t\t\tposition  : 'absolute',\n\t\t\tbottom    : '1vh',\n\t\t\ttransform : 'translate(-50%, 0)',\n\t\t\tleft      : '50%'\n\t\t},\n\t\tcard :\n\t\t{\n\t\t\tposition  : 'absolute',\n\t\t\tbottom    : '50vh',\n\t\t\ttransform : 'translate(-50%, 0)',\n\t\t\tleft      : '50%',\n\t\t\ttextAlign : 'center'\n\t\t},\n\t\tsessionView :\n\t\t{\n\t\t\tposition  : 'absolute',\n\t\t\twidth     : '100%',\n\t\t\theight    : '100%',\n\t\t\ttextAlign : 'center'\n\t\t}\n\t});\n\nclass SessionView extends Component\n{\n\tstate =\n\t{\n\t\topen : false\n\t};\n\t\n\thandleClickOpen = () =>\n\t{\n\t\tthis.setState({ open: true });\n\t};\n\t\n\thandleClose = () =>\n\t{\n\t\tthis.setState({ open: false });\n\t};\n\n\thandleTransfer = () =>\n\t{\n\t\tthis.handleClose();\n\n\t\tconst {\n\t\t\tsipCaller,\n\t\t\tsession,\n\t\t\ttransferUri\n\t\t} = this.props;\n\n\t\tsipCaller.refer(session.sipSession, transferUri);\n\t}\n\n\trender()\n\t{\n\t\tconst {\n\t\t\tsipCaller,\n\t\t\tsession,\n\t\t\ttransferUri,\n\t\t\tsetTransferUri,\n\t\t\tclasses\n\t\t} = this.props;\n\n\t\tif (session && session.sessionState === sessionStates.TERMINATED)\n\t\t{\n\t\t\tconst sipSession = session.sipSession;\n\t\t\tconst displayName =\n\t\t\t\tsipSession.remoteIdentity.displayName ||\n\t\t\t\tsipSession.remoteIdentity.uri.user;\n\t\t\tconst sipUri = sipSession.remoteIdentity.uri.toString();\n\n\t\t\treturn (\n\t\t\t\t<Card className={classes.card}>\n\t\t\t\t\t<CardContent>\n\t\t\t\t\t\t<Typography variant='h3' noWrap>\n\t\t\t\t\t\t\tSession ended\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t<Typography variant='h4' noWrap>\n\t\t\t\t\t\t\t{ displayName }\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Typography variant='h5' noWrap>\n\t\t\t\t\t\t\t{ sipUri }\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</CardContent>\n\t\t\t\t</Card>\n\t\t\t);\n\t\t}\n\n\t\tif (session && session.remoteStream)\n\t\t{\n\t\t\treturn (\n\t\t\t\t<div className={classes.sessionView}>\n\t\t\t\t\t<MediaView\n\t\t\t\t\t\tmediaStream={session.remoteStream}\n\t\t\t\t\t/>\n\t\t\t\t\t<Dialog\n\t\t\t\t\t\topen={this.state.open}\n\t\t\t\t\t\tonClose={this.handleClose}\n\t\t\t\t\t\taria-labelledby='form-dialog-title'\n\t\t\t\t\t>\n\t\t\t\t\t\t<DialogTitle id='form-dialog-title'>Transfer session</DialogTitle>\n\t\t\t\t\t\t<DialogContent>\n\t\t\t\t\t\t\t<DialogContentText>\n\t\t\t\t\t\t\t\tTo transfer this session, type the SIP URI you want to\n\t\t\t\t\t\t\t\ttransfer to below.\n\t\t\t\t\t\t\t</DialogContentText>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\tmargin='dense'\n\t\t\t\t\t\t\t\tid='sipUri'\n\t\t\t\t\t\t\t\tlabel='SIP URI'\n\t\t\t\t\t\t\t\ttype='email'\n\t\t\t\t\t\t\t\tvalue={transferUri || ''}\n\t\t\t\t\t\t\t\tonChange={(event) => setTransferUri(event.target.value)}\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</DialogContent>\n\t\t\t\t\t\t<DialogActions>\n\t\t\t\t\t\t\t<Button onClick={this.handleClose} color='primary'>\n\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button onClick={this.handleTransfer} color='primary'>\n\t\t\t\t\t\t\t\tTransfer\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</DialogActions>\n\t\t\t\t\t</Dialog>\n\t\t\t\t\t<div className={classes.buttonList}>\n\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\t\taria-label='Audio on/off'\n\t\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\t\tonClick={() => sipCaller.toggleMedia(session.sipSession, 'audio', !session.remoteAudioMuted)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ session.remoteAudioMuted ?\n\t\t\t\t\t\t\t\t<AudioOffIcon />\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<AudioIcon />\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\t\taria-label='Video on/off'\n\t\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\t\tonClick={() => sipCaller.toggleMedia(session.sipSession, 'video', !session.remoteVideoMuted)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ session.remoteVideoMuted ?\n\t\t\t\t\t\t\t\t<VideoOffIcon />\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<VideoIcon />\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\t\taria-label='Video on/off'\n\t\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\t\tonClick={this.handleClickOpen}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<TransferIcon />\n\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\tcolor='secondary'\n\t\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\t\taria-label='Hang up'\n\t\t\t\t\t\t\tsize='large'\n\t\t\t\t\t\t\tonClick={() => sipCaller.terminate(session.sipSession)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<CallEndIcon />\n\t\t\t\t\t\t</Fab>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t}\n}\n\nSessionView.propTypes =\n{\n\tsipCaller      : PropTypes.object.isRequired,\n\tsession        : PropTypes.object,\n\ttransferUri    : PropTypes.string,\n\tsetTransferUri : PropTypes.func.isRequired,\n\tclasses        : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\tsession     : state.sessions[state.userStatus.currentSession],\n\t\ttransferUri : state.user.transferUri\n\t});\n\nconst mapDispatchToProps = (dispatch) =>\n\t({\n\t\tsetTransferUri : (transferUri) => dispatch(\n\t\t\tstateActions.setTransferUri({ transferUri }))\n\t});\n\nexport default withSipCallerContext(\n\tconnect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(SessionView))\n);","import { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { withSnackbar } from 'notistack';\nimport * as stateActions from '../../actions/stateActions';\n\nclass Notifications extends Component\n{\n\tdisplayed = [];\n\n\tstoreDisplayed = (id) =>\n\t{\n\t\tthis.displayed = [ ...this.displayed, id ];\n\t};\n\n\tshouldComponentUpdate({ notifications: newNotifications = [] })\n\t{\n\t\tconst { notifications: currentNotifications } = this.props;\n\n\t\tlet notExists = false;\n\n\t\tfor (let i = 0; i < newNotifications.length; i += 1)\n\t\t{\n\t\t\tif (notExists) continue;\n\n\t\t\tnotExists = notExists ||\n\t\t\t\t!currentNotifications.filter(({ id }) => newNotifications[i].id === id).length;\n\t\t}\n\n\t\treturn notExists;\n\t}\n\n\tcomponentDidUpdate()\n\t{\n\t\tconst { notifications = [] } = this.props;\n\n\t\tnotifications.forEach((notification) =>\n\t\t{\n\t\t\t// Do nothing if snackbar is already displayed\n\t\t\tif (this.displayed.includes(notification.id)) return;\n\t\t\t// Display snackbar using notistack\n\t\t\tthis.props.enqueueSnackbar(notification.text,\n\t\t\t\t{\n\t\t\t\t\tvariant          : notification.type,\n\t\t\t\t\tautoHideDuration : notification.timeout,\n\t\t\t\t\tanchorOrigin     : {\n\t\t\t\t\t\tvertical   : 'bottom',\n\t\t\t\t\t\thorizontal : 'left'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t\t// Keep track of snackbars that we've displayed\n\t\t\tthis.storeDisplayed(notification.id);\n\t\t\t// Dispatch action to remove snackbar from redux store\n\t\t\tthis.props.removeNotification(notification.id);\n\t\t});\n\t}\n\n\trender()\n\t{\n\t\treturn null;\n\t}\n}\n\nNotifications.propTypes =\n{\n\tnotifications      : PropTypes.array.isRequired,\n\tenqueueSnackbar    : PropTypes.func.isRequired,\n\tremoveNotification : PropTypes.func.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\tnotifications : state.notifications\n\t});\n\nconst mapDispatchToProps = (dispatch) =>\n\t({\n\t\tremoveNotification : (notificationId) =>\n\t\t\tdispatch(stateActions.removeNotification(notificationId))\n\t});\n\nexport default withSnackbar(\n\tconnect(mapStateToProps, mapDispatchToProps)(Notifications)\n);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { withSipCallerContext } from '../../sipCallerContext';\nimport { withStyles } from '@material-ui/core/styles';\nimport * as sessionStates from '../../sessionStates';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\n\nconst styles = {\n\tcontainer :\n\t{\n\t\tposition       : 'fixed',\n\t\ttop            : 0,\n\t\tright          : 0,\n\t\tbottom         : 0,\n\t\tpadding        : 20,\n\t\tdisplay        : 'flex',\n\t\tflexDirection  : 'column',\n\t\tjustifyContent : 'flex-end',\n\t\talignItems     : 'flex-end',\n\t\ttransition     : 'right 0.3s'\n\t},\n\tcard :\n\t{\n\t\twidth     : 300,\n\t\tmarginTop : 5\n\t}\n};\n\nconst SessionNotifications = (props) =>\n{\n\tconst {\n\t\tsipCaller,\n\t\tincomingSessions,\n\t\tclasses\n\t} = props;\n\n\treturn (\n\t\t<div className={classes.container}>\n\t\t\t{ incomingSessions.map((session) =>\n\t\t\t{\n\t\t\t\treturn (\n\t\t\t\t\t<Card key={session.sipSession.request.callId} className={classes.card}>\n\t\t\t\t\t\t<CardActionArea>\n\t\t\t\t\t\t\t<CardContent>\n\t\t\t\t\t\t\t\t<Typography gutterBottom variant='h6' component='h2'>\n\t\t\t\t\t\t\t\t\tIncoming call\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t<Typography component='p' noWrap>\n\t\t\t\t\t\t\t\t\t{ session.sipSession.remoteIdentity.displayName ||\n\t\t\t\t\t\t\t\t\t\tsession.sipSession.remoteIdentity.uri.user }\n\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t</CardContent>\n\t\t\t\t\t\t</CardActionArea>\n\t\t\t\t\t\t<CardActions>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\tonClick={() => sipCaller.accept(session.sipSession)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tAnswer\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tsize='small'\n\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\tonClick={() => sipCaller.terminate(session.sipSession)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tDecline\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</CardActions>\n\t\t\t\t\t</Card>\n\t\t\t\t);\n\t\t\t})}\n\t\t</div>\n\t);\n};\n\nSessionNotifications.propTypes = {\n\tsipCaller        : PropTypes.object.isRequired,\n\tincomingSessions : PropTypes.array.isRequired,\n\tclasses          : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\tincomingSessions :\n\t\t\tObject.values(state.sessions).filter((session) =>\n\t\t\t\t(session.sessionState === sessionStates.NEW &&\n\t\t\t\tsession.direction === sessionStates.INCOMING))\n\t});\n\nexport default withSipCallerContext(\n\tconnect(mapStateToProps, null)(withStyles(styles)(SessionNotifications))\n);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport Badge from '@material-ui/core/Badge';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Menu from '@material-ui/core/Menu';\nimport Popover from '@material-ui/core/Popover';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport ViewCarousel from '@material-ui/icons/ViewCarousel';\nimport History from '@material-ui/icons/History';\nimport MoreIcon from '@material-ui/icons/MoreVert';\nimport Account from './Account/Account';\nimport SessionHistory from './SessionHistory/SessionHistory';\nimport Sessions from './Sessions/Sessions';\nimport Dialer from './Dialer/Dialer';\nimport SessionView from './SessionView/SessionView';\nimport Notifications from './Notifications/Notifications';\nimport SessionNotifications from './Notifications/SessionNotifications';\n\nconst styles = (theme) =>\n\t({\n\t\troot : {\n\t\t\twidth  : '100%',\n\t\t\theight : '100%'\n\t\t},\n\t\tgrow : {\n\t\t\tflexGrow : 1\n\t\t},\n\t\ttitle : {\n\t\t\tdisplay                      : 'none',\n\t\t\t[theme.breakpoints.up('sm')] : {\n\t\t\t\tdisplay : 'block'\n\t\t\t}\n\t\t},\n\t\tsectionDesktop : {\n\t\t\tdisplay                      : 'none',\n\t\t\t[theme.breakpoints.up('md')] : {\n\t\t\t\tdisplay : 'flex'\n\t\t\t}\n\t\t},\n\t\tsectionMobile : {\n\t\t\tdisplay                      : 'flex',\n\t\t\t[theme.breakpoints.up('md')] : {\n\t\t\t\tdisplay : 'none'\n\t\t\t}\n\t\t}\n\t});\n\nclass App extends Component\n{\n\tstate =\n\t{\n\t\tanchorEl           : null,\n\t\tmobileMoreAnchorEl : null,\n\t\tcurrentMenu        : null\n\t};\n\n\thandleExited = () =>\n\t{\n\t\tthis.setState({\n\t\t\tcurrentMenu : null\n\t\t});\n\t};\n\n\thandleMenuOpen = (event, menu) =>\n\t{\n\t\tthis.setState({\n\t\t\tanchorEl    : event.currentTarget,\n\t\t\tcurrentMenu : menu\n\t\t});\n\t};\n\n\thandleMenuClose = () =>\n\t{\n\t\tthis.setState({\n\t\t\tanchorEl : null\n\t\t});\n\n\t\tthis.handleMobileMenuClose();\n\t};\n\n\thandleMobileMenuOpen = (event) =>\n\t{\n\t\tthis.setState({ mobileMoreAnchorEl: event.currentTarget });\n\t};\n\n\thandleMobileMenuClose = () =>\n\t{\n\t\tthis.setState({ mobileMoreAnchorEl: null });\n\t};\n\n\trender()\n\t{\n\t\tconst {\n\t\t\tanchorEl,\n\t\t\tmobileMoreAnchorEl,\n\t\t\tcurrentMenu\n\t\t} = this.state;\n\n\t\tconst {\n\t\t\tsessions,\n\t\t\tclasses\n\t\t} = this.props;\n\n\t\tconst isMenuOpen = Boolean(anchorEl);\n\t\tconst isMobileMenuOpen = Boolean(mobileMoreAnchorEl);\n\n\t\treturn (\n\t\t\t<div className={classes.root}>\n\t\t\t\t<SessionView />\n\t\t\t\t<Notifications />\n\t\t\t\t<SessionNotifications />\n\t\t\t\t<AppBar\n\t\t\t\t\tposition='static'\n\t\t\t\t\tstyle={{ background: 'transparent', boxShadow: 'none' }}\n\t\t\t\t>\n\t\t\t\t\t<Toolbar>\n\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\tclassName={classes.title}\n\t\t\t\t\t\t\tvariant='h6'\n\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\tnoWrap\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSipCaller\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Dialer />\n\t\t\t\t\t\t<div className={classes.grow} />\n\t\t\t\t\t\t<div className={classes.sectionDesktop}>\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\taria-owns={isMenuOpen && currentMenu === 'sessions' ? 'material-appbar' : undefined}\n\t\t\t\t\t\t\t\taria-haspopup='true'\n\t\t\t\t\t\t\t\tonClick={(event) => this.handleMenuOpen(event, 'sessions')}\n\t\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Badge badgeContent={sessions} color='secondary'>\n\t\t\t\t\t\t\t\t\t<ViewCarousel />\n\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\taria-owns={isMenuOpen && currentMenu === 'history' ? 'material-appbar' : undefined}\n\t\t\t\t\t\t\t\taria-haspopup='true'\n\t\t\t\t\t\t\t\tonClick={(event) => this.handleMenuOpen(event, 'history')}\n\t\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<History />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\taria-owns={isMenuOpen && currentMenu === 'account' ? 'material-appbar' : undefined}\n\t\t\t\t\t\t\t\taria-haspopup='true'\n\t\t\t\t\t\t\t\tonClick={(event) => this.handleMenuOpen(event, 'account')}\n\t\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<AccountCircle />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={classes.sectionMobile}>\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\taria-haspopup='true'\n\t\t\t\t\t\t\t\tonClick={this.handleMobileMenuOpen}\n\t\t\t\t\t\t\t\tcolor='inherit'\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<MoreIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Toolbar>\n\t\t\t\t</AppBar>\n\t\t\t\t<Popover\n\t\t\t\t\tanchorEl={anchorEl}\n\t\t\t\t\tanchorOrigin={{ vertical: 'bottom', horizontal: 'left' }}\n\t\t\t\t\ttransformOrigin={{ vertical: 'top', horizontal: 'left' }}\n\t\t\t\t\topen={isMenuOpen}\n\t\t\t\t\tonClose={this.handleMenuClose}\n\t\t\t\t\tonExited={this.handleExited}\n\t\t\t\t\tgetContentAnchorEl={null}\n\t\t\t\t>\n\t\t\t\t\t{ currentMenu === 'sessions' ?\n\t\t\t\t\t\t<Sessions />\n\t\t\t\t\t\t:null\n\t\t\t\t\t}\n\t\t\t\t\t{ currentMenu === 'history' ?\n\t\t\t\t\t\t<SessionHistory />\n\t\t\t\t\t\t:null\n\t\t\t\t\t}\n\t\t\t\t\t{ currentMenu === 'account' ?\n\t\t\t\t\t\t<Account />\n\t\t\t\t\t\t:null\n\t\t\t\t\t}\n\t\t\t\t</Popover>\n\t\t\t\t<Menu\n\t\t\t\t\tanchorEl={mobileMoreAnchorEl}\n\t\t\t\t\tanchorOrigin={{ vertical: 'bottom', horizontal: 'left' }}\n\t\t\t\t\ttransformOrigin={{ vertical: 'bottom', horizontal: 'right' }}\n\t\t\t\t\topen={isMobileMenuOpen}\n\t\t\t\t\tonClose={this.handleMenuClose}\n\t\t\t\t\tgetContentAnchorEl={null}\n\t\t\t\t>\n\t\t\t\t\t<MenuItem\n\t\t\t\t\t\tonClick={(event) => this.handleMenuOpen(event, 'sessions')}\n\t\t\t\t\t>\n\t\t\t\t\t\t<IconButton color='inherit'>\n\t\t\t\t\t\t\t<Badge badgeContent={sessions} color='secondary'>\n\t\t\t\t\t\t\t\t<ViewCarousel />\n\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t<p>Sessions</p>\n\t\t\t\t\t</MenuItem>\n\t\t\t\t\t<MenuItem\n\t\t\t\t\t\tonClick={(event) => this.handleMenuOpen(event, 'history')}\n\t\t\t\t\t>\n\t\t\t\t\t\t<IconButton color='inherit'>\n\t\t\t\t\t\t\t<History />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t<p>Call log</p>\n\t\t\t\t\t</MenuItem>\n\t\t\t\t\t<MenuItem\n\t\t\t\t\t\tonClick={(event) => this.handleMenuOpen(event, 'account')}\n\t\t\t\t\t>\n\t\t\t\t\t\t<IconButton color='inherit'>\n\t\t\t\t\t\t\t<AccountCircle />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t<p>Account</p>\n\t\t\t\t\t</MenuItem>\n\t\t\t\t</Menu>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nApp.propTypes =\n{\n\tsessions : PropTypes.number.isRequired,\n\tclasses  : PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) =>\n\t({\n\t\tsessions : Object.keys(state.sessions).length\n\t});\n\nexport default connect(mapStateToProps, null)(withStyles(styles)(App));\n","import domready from 'domready';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { PersistGate } from 'redux-persist/lib/integration/react';\nimport { persistor, store } from './store';\nimport { SnackbarProvider } from 'notistack';\nimport debug from 'debug';\nimport Logger from './logger';\nimport SipCallerContext from './sipCallerContext';\n\nimport './index.css';\nimport App from './components/App';\nimport LoadingView from './components/LoadingView';\n\nimport * as serviceWorker from './serviceWorker';\nimport SipCaller from './sipCaller';\n\nif (process.env.NODE_ENV !== 'production')\n{\n\tdebug.enable('sipcaller:*');\n}\n\nconst logger = new Logger();\n\nlet sipCaller;\n\nSipCaller.init({ store });\n\ndomready(() =>\n{\n\tlogger.debug('DOM ready');\n\n\trun();\n});\n\nfunction run()\n{\n\tlogger.debug('run() [environment:%s]', process.env.NODE_ENV);\n\n\tsipCaller = new SipCaller();\n\tglobal.sipCaller = sipCaller;\n\n\tReactDOM.render(\n\t\t<Provider store={store}>\n\t\t\t<PersistGate loading={<LoadingView />} persistor={persistor}>\n\t\t\t\t<SipCallerContext.Provider value={sipCaller}>\n\t\t\t\t\t<SnackbarProvider>\n\t\t\t\t\t\t<App />\n\t\t\t\t\t</SnackbarProvider>\n\t\t\t\t</SipCallerContext.Provider>\n\t\t\t</PersistGate>\n\t\t</Provider>,\n\t\tdocument.getElementById('sipcaller')\n\t);\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.register();\n","import React from 'react';\n\nconst SipCallerContext = React.createContext();\n\nexport default SipCallerContext;\n\nexport const withSipCallerContext = (Component) =>\n{\n\treturn (props) =>\n\t\t(\n\t\t\t<SipCallerContext.Consumer>\n\t\t\t\t{(sipCaller) => <Component {...props} sipCaller={sipCaller} />}\n\t\t\t</SipCallerContext.Consumer>\n\t\t);\n};","export const setUser = ({\n\tdisplayName,\n\tsipUri,\n\tpassword,\n\toutboundProxy,\n\tautoRegister\n}) => (dispatch) =>\n{\n\tdispatch({\n\t\ttype    : 'SET_USER',\n\t\tpayload :\n\t\t{\n\t\t\tdisplayName,\n\t\t\tsipUri,\n\t\t\tpassword,\n\t\t\toutboundProxy,\n\t\t\tautoRegister\n\t\t}\n\t});\n};\n\nexport const setDisplayName = ({ displayName }) => (dispatch) =>\n{\n\tdispatch({\n\t\ttype    : 'SET_DISPLAY_NAME',\n\t\tpayload : { displayName }\n\t});\n};\n\nexport const setSipUri = ({ sipUri }) => (dispatch) =>\n{\n\tdispatch({\n\t\ttype    : 'SET_SIP_URI',\n\t\tpayload : { sipUri }\n\t});\n};\n\nexport const setPassword = ({ password }) => (dispatch) =>\n{\n\tdispatch({\n\t\ttype    : 'SET_PASSWORD',\n\t\tpayload : { password }\n\t});\n};\n\nexport const setOutboundProxy = ({ outboundProxy }) => (dispatch) =>\n{\n\tdispatch({\n\t\ttype    : 'SET_OUTBOUND_PROXY',\n\t\tpayload : { outboundProxy }\n\t});\n};\n\nexport const setRequestUri = ({ requestUri }) => (dispatch) =>\n{\n\tdispatch({\n\t\ttype    : 'SET_REQUEST_URI',\n\t\tpayload : { requestUri }\n\t});\n};\n\nexport const setTransferUri = ({ transferUri }) => (dispatch) =>\n{\n\tdispatch({\n\t\ttype    : 'SET_TRANSFER_URI',\n\t\tpayload : { transferUri }\n\t});\n};\n\nexport const setAutoRegister = ({ autoRegister }) => (dispatch) =>\n{\n\tdispatch({\n\t\ttype    : 'SET_AUTO_REGISTER',\n\t\tpayload : { autoRegister }\n\t});\n};\n\nexport const setRegistered = ({ registered }) => (dispatch) =>\n{\n\tdispatch({\n\t\ttype    : 'SET_REGISTERED',\n\t\tpayload : { registered }\n\t});\n};\n\nexport const setRegisterInProgress = () => (dispatch) =>\n{\n\tdispatch({\n\t\ttype : 'SET_REGISTER_IN_PROGRESS'\n\t});\n};\n\nexport const setRegistrationMessage = ({ registrationMessage }) => (dispatch) =>\n{\n\tdispatch({\n\t\ttype    : 'SET_REGISTRATION_MESSAGE',\n\t\tpayload : { registrationMessage }\n\t});\n};\n\nexport const addSession = ({ sipSession, direction }) => (dispatch) =>\n{\n\tdispatch({\n\t\ttype    : 'ADD_SESSION',\n\t\tpayload : { sipSession, direction }\n\t});\n};\n\nexport const removeSession = ({ sipSession }) => (dispatch) =>\n{\n\tdispatch({\n\t\ttype    : 'REMOVE_SESSION',\n\t\tpayload : { sipSession }\n\t});\n};\n\nexport const addRemoteStream = ({ sipSession, remoteStream }) => (dispatch) =>\n{\n\tdispatch({\n\t\ttype    : 'ADD_REMOTE_STREAM',\n\t\tpayload : { sipSession, remoteStream }\n\t});\n};\n\nexport const addLocalStream = ({ sipSession, localStream }) => (dispatch) =>\n{\n\tdispatch({\n\t\ttype    : 'ADD_LOCAL_STREAM',\n\t\tpayload : { sipSession, localStream }\n\t});\n};\n\nexport const toggleRemoteAudio = ({ sipSession }) => (dispatch) =>\n{\n\tdispatch({\n\t\ttype    : 'TOGGLE_REMOTE_AUDIO',\n\t\tpayload : { sipSession }\n\t});\n};\n\nexport const toggleRemoteVideo = ({ sipSession }) => (dispatch) =>\n{\n\tdispatch({\n\t\ttype    : 'TOGGLE_REMOTE_VIDEO',\n\t\tpayload : { sipSession }\n\t});\n};\n\nexport const toggleLocalAudio = ({ sipSession }) => (dispatch) =>\n{\n\tdispatch({\n\t\ttype    : 'TOGGLE_LOCAL_AUDIO',\n\t\tpayload : { sipSession }\n\t});\n};\n\nexport const toggleLocalVideo = ({ sipSession }) => (dispatch) =>\n{\n\tdispatch({\n\t\ttype    : 'TOGGLE_LOCAL_VIDEO',\n\t\tpayload : { sipSession }\n\t});\n};\n\nexport const setSessionState = ({ sipSession, sessionState }) => (dispatch) =>\n{\n\tdispatch({\n\t\ttype    : 'SET_SESSION_STATE',\n\t\tpayload : { sipSession, sessionState }\n\t});\n};\n\nexport const setCurrentSession = ({ currentSession }) => (dispatch) =>\n{\n\tdispatch({\n\t\ttype    : 'SET_CURRENT_SESSION',\n\t\tpayload : { currentSession }\n\t});\n};\n\nexport const addSessionToHistory = ({\n\tdisplayName,\n\tsipUri,\n\tdirection,\n\tstartTime\n}) => (dispatch) =>\n{\n\tdispatch({\n\t\ttype    : 'ADD_SESSION_ENTRY',\n\t\tpayload :\n\t\t{\n\t\t\tdisplayName,\n\t\t\tsipUri,\n\t\t\tdirection,\n\t\t\tstartTime\n\t\t}\n\t});\n};\n\nexport const clearSessionHistory = () => (dispatch) =>\n{\n\tdispatch({\n\t\ttype : 'CLEAR_SESSION_HISTORY'\n\t});\n};\n\nexport const toggleVideo = () => (dispatch) =>\n{\n\tdispatch({\n\t\ttype : 'TOGGLE_VIDEO'\n\t});\n};\n\nexport const addNotification = (notification) =>\n{\n\treturn {\n\t\ttype    : 'ADD_NOTIFICATION',\n\t\tpayload : { notification }\n\t};\n};\n\nexport const removeNotification = (notificationId) =>\n{\n\treturn {\n\t\ttype    : 'REMOVE_NOTIFICATION',\n\t\tpayload : { notificationId }\n\t};\n};\n\nexport const removeAllNotifications = () =>\n{\n\treturn {\n\t\ttype : 'REMOVE_ALL_NOTIFICATIONS'\n\t};\n};\n","import debug from 'debug';\n\nconst APP_NAME = 'sipcaller';\n\nexport default class Logger\n{\n\tconstructor(prefix)\n\t{\n\t\tif (prefix)\n\t\t{\n\t\t\tthis._debug = debug(`${APP_NAME}:${prefix}`);\n\t\t\tthis._warn = debug(`${APP_NAME}:WARN:${prefix}`);\n\t\t\tthis._error = debug(`${APP_NAME}:ERROR:${prefix}`);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._debug = debug(APP_NAME);\n\t\t\tthis._warn = debug(`${APP_NAME}:WARN`);\n\t\t\tthis._error = debug(`${APP_NAME}:ERROR`);\n\t\t}\n\n\t\t/* eslint-disable no-console */\n\t\tthis._debug.log = console.info.bind(console);\n\t\tthis._warn.log = console.warn.bind(console);\n\t\tthis._error.log = console.error.bind(console);\n\t\t/* eslint-enable no-console */\n\t}\n\n\tget debug()\n\t{\n\t\treturn this._debug;\n\t}\n\n\tget warn()\n\t{\n\t\treturn this._warn;\n\t}\n\n\tget error()\n\t{\n\t\treturn this._error;\n\t}\n}","const initialState =\n{\n\tdisplayName   : null,\n\tsipUri        : null,\n\tpassword      : null,\n\toutboundProxy : null,\n\tautoRegister  : false,\n\tvideoEnabled  : true,\n\trequestUri    : null,\n\ttransferUri   : null\n};\n\nconst user = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'SET_USER':\n\t\t{\n\t\t\tconst {\n\t\t\t\tdisplayName,\n\t\t\t\tsipUri,\n\t\t\t\tpassword,\n\t\t\t\toutboundProxy,\n\t\t\t\tautoRegister\n\t\t\t} = action.payload;\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tdisplayName,\n\t\t\t\tsipUri,\n\t\t\t\tpassword,\n\t\t\t\toutboundProxy,\n\t\t\t\tautoRegister\n\t\t\t};\n\t\t}\n\n\t\tcase 'SET_DISPLAY_NAME':\n\t\t{\n\t\t\tconst { displayName } = action.payload;\n\n\t\t\treturn { ...state, displayName };\n\t\t}\n\n\t\tcase 'SET_SIP_URI':\n\t\t{\n\t\t\tconst { sipUri } = action.payload;\n\n\t\t\treturn { ...state, sipUri };\n\t\t}\n\n\t\tcase 'SET_PASSWORD':\n\t\t{\n\t\t\tconst { password } = action.payload;\n\n\t\t\treturn { ...state, password };\n\t\t}\n\n\t\tcase 'SET_OUTBOUND_PROXY':\n\t\t{\n\t\t\tconst { outboundProxy } = action.payload;\n\n\t\t\treturn { ...state, outboundProxy };\n\t\t}\n\n\t\tcase 'SET_AUTO_REGISTER':\n\t\t{\n\t\t\tconst { autoRegister } = action.payload;\n\n\t\t\treturn { ...state, autoRegister };\n\t\t}\n\n\t\tcase 'TOGGLE_VIDEO':\n\t\t{\n\t\t\tconst videoEnabled = !state.videoEnabled;\n\n\t\t\treturn { ...state, videoEnabled };\n\t\t}\n\n\t\tcase 'SET_REQUEST_URI':\n\t\t{\n\t\t\tconst { requestUri } = action.payload;\n\n\t\t\treturn { ...state, requestUri };\n\t\t}\n\n\t\tcase 'SET_TRANSFER_URI':\n\t\t{\n\t\t\tconst { transferUri } = action.payload;\n\n\t\t\treturn { ...state, transferUri };\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default user;","import omit from 'lodash.omit';\nimport * as sessionStates from '../sessionStates';\n\nconst initialState =\n{\n\tsipSession       : null, // SIP.js session object\n\tdirection        : null,\n\tremoteStream     : null, // MediaStream\n\tremoteAudioMuted : false,\n\tremoteVideoMuted : false,\n\tlocalStream      : null, // MediaStream\n\tlocalAudioMuted  : false,\n\tlocalVideoMuted  : false,\n\tsessionState     : sessionStates.NEW // State of session\n};\n\nconst session = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_SESSION':\n\t\t{\n\t\t\tconst {\n\t\t\t\tsipSession,\n\t\t\t\tdirection\n\t\t\t} = action.payload;\n\n\t\t\treturn { ...state, sipSession, direction };\n\t\t}\n\n\t\tcase 'ADD_REMOTE_STREAM':\n\t\t{\n\t\t\tconst {\n\t\t\t\tremoteStream\n\t\t\t} = action.payload;\n\n\t\t\treturn { ...state, remoteStream };\n\t\t}\n\n\t\tcase 'ADD_LOCAL_STREAM':\n\t\t{\n\t\t\tconst {\n\t\t\t\tlocalStream\n\t\t\t} = action.payload;\n\n\t\t\treturn { ...state, localStream };\n\t\t}\n\n\t\tcase 'SET_SESSION_STATE':\n\t\t{\n\t\t\tconst {\n\t\t\t\tsessionState\n\t\t\t} = action.payload;\n\n\t\t\treturn { ...state, sessionState };\n\t\t}\n\n\t\tcase 'TOGGLE_LOCAL_AUDIO':\n\t\t{\n\t\t\tconst localAudioMuted = !state.localAudioMuted;\n\n\t\t\treturn { ...state, localAudioMuted };\n\t\t}\n\n\t\tcase 'TOGGLE_LOCAL_VIDEO':\n\t\t{\n\t\t\tconst localVideoMuted = !state.localVideoMuted;\n\n\t\t\treturn { ...state, localVideoMuted };\n\t\t}\n\n\t\tcase 'TOGGLE_REMOTE_AUDIO':\n\t\t{\n\t\t\tconst remoteAudioMuted = !state.remoteAudioMuted;\n\n\t\t\treturn { ...state, remoteAudioMuted };\n\t\t}\n\n\t\tcase 'TOGGLE_REMOTE_VIDEO':\n\t\t{\n\t\t\tconst remoteVideoMuted = !state.remoteVideoMuted;\n\n\t\t\treturn { ...state, remoteVideoMuted };\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nconst sessions = (state = {}, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_SESSION':\n\t\t{\n\t\t\tconst {\n\t\t\t\tsipSession\n\t\t\t} = action.payload;\n\n\t\t\tconst callId = sipSession.request.callId;\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[callId] : session(undefined, action)\n\t\t\t};\n\t\t}\n\n\t\tcase 'REMOVE_SESSION':\n\t\t{\n\t\t\tconst {\n\t\t\t\tsipSession\n\t\t\t} = action.payload;\n\n\t\t\tconst callId = sipSession.request.callId;\n\n\t\t\treturn omit(state, callId);\n\t\t}\n\n\t\tcase 'TOGGLE_LOCAL_AUDIO':\n\t\tcase 'TOGGLE_LOCAL_VIDEO':\n\t\tcase 'TOGGLE_REMOTE_AUDIO':\n\t\tcase 'TOGGLE_REMOTE_VIDEO':\n\t\tcase 'ADD_REMOTE_STREAM':\n\t\tcase 'ADD_LOCAL_STREAM':\n\t\tcase 'SET_SESSION_STATE':\n\t\t{\n\t\t\tconst { sipSession } = action.payload;\n\t\t\tconst callId = sipSession.request.callId;\n\n\t\t\tconst oldSession = state[callId];\n\n\t\t\tif (!oldSession)\n\t\t\t{\n\t\t\t\tthrow new Error('No session found');\n\t\t\t}\n\n\t\t\treturn { ...state, [callId]: session(oldSession, action) };\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default sessions;","const sessionHistory = (state = [], action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_SESSION_ENTRY':\n\t\t{\n\t\t\tconst {\n\t\t\t\tdisplayName,\n\t\t\t\tsipUri,\n\t\t\t\tdirection,\n\t\t\t\tstartTime\n\t\t\t} = action.payload;\n\n\t\t\treturn [\n\t\t\t\t...state,\n\t\t\t\t{\n\t\t\t\t\tdisplayName,\n\t\t\t\t\tsipUri,\n\t\t\t\t\tdirection,\n\t\t\t\t\tstartTime\n\t\t\t\t}\n\t\t\t];\n\t\t}\n\n\t\tcase 'CLEAR_SESSION_HISTORY':\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default sessionHistory;","const initialState =\n{\n\tregisterInProgress  : false,\n\tregistered          : false,\n\tregistrationMessage : null,\n\tcurrentSession      : null\n};\n\nconst userStatus = (state = initialState, action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'SET_REGISTERED':\n\t\t{\n\t\t\tconst { registered } = action.payload;\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tregistered,\n\t\t\t\tregisterInProgress : false\n\t\t\t};\n\t\t}\n\n\t\tcase 'SET_REGISTRATION_MESSAGE':\n\t\t{\n\t\t\tconst { registrationMessage } = action.payload;\n\n\t\t\treturn { ...state, registrationMessage };\n\t\t}\n\n\t\tcase 'SET_REGISTER_IN_PROGRESS':\n\t\t{\n\t\t\treturn { ...state, registerInProgress: true };\n\t\t}\n\n\t\tcase 'ADD_SESSION':\n\t\t{\n\t\t\tconst {\n\t\t\t\tsipSession\n\t\t\t} = action.payload;\n\n\t\t\tconst callId = sipSession.request.callId;\n\n\t\t\tif (state.currentSession)\n\t\t\t\treturn state;\n\t\t\telse\n\t\t\t\treturn { ...state, currentSession: callId };\n\t\t}\n\n\t\tcase 'REMOVE_SESSION': // Check if removed session is current\n\t\t{\n\t\t\tconst {\n\t\t\t\tsipSession\n\t\t\t} = action.payload;\n\n\t\t\tconst callId = sipSession.request.callId;\n\n\t\t\tif (state.currentSession === callId)\n\t\t\t\treturn { ...state, currentSession: null };\n\t\t\telse\n\t\t\t\treturn state;\n\t\t}\n\n\t\tcase 'SET_CURRENT_SESSION':\n\t\t{\n\t\t\tconst { currentSession } = action.payload;\n\n\t\t\treturn { ...state, currentSession };\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default userStatus;","const notifications = (state = [], action) =>\n{\n\tswitch (action.type)\n\t{\n\t\tcase 'ADD_NOTIFICATION':\n\t\t{\n\t\t\tconst { notification } = action.payload;\n\n\t\t\treturn [ ...state, notification ];\n\t\t}\n\n\t\tcase 'REMOVE_NOTIFICATION':\n\t\t{\n\t\t\tconst { notificationId } = action.payload;\n\n\t\t\treturn state.filter((notification) => notification.id !== notificationId);\n\t\t}\n\n\t\tcase 'REMOVE_ALL_NOTIFICATIONS':\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default notifications;","import { combineReducers } from 'redux';\nimport user from './user';\nimport sessions from './sessions';\nimport sessionHistory from './sessionHistory';\nimport userStatus from './userStatus';\nimport notifications from './notifications';\n\nexport default combineReducers({\n\tuser,\n\tsessions,\n\tsessionHistory,\n\tuserStatus,\n\tnotifications\n});","import { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport { createLogger } from 'redux-logger';\nimport { persistStore, persistReducer } from 'redux-persist';\nimport storage from 'redux-persist/lib/storage';\nimport autoMergeLevel2 from 'redux-persist/lib/stateReconciler/autoMergeLevel2';\nimport rootReducer from './reducers/rootReducer';\n\nconst persistConfig =\n{\n\tkey             : 'root',\n\tstorage         : storage,\n\tstateReconciler : autoMergeLevel2,\n\tblacklist       : [ 'sessions', 'userStatus' ]\n};\n\nconst reduxMiddlewares =\n[\n\tthunk\n];\n\nif (process.env.NODE_ENV !== 'production')\n{\n\tconst reduxLogger = createLogger(\n\t\t{\n\t\t\tduration  : true,\n\t\t\ttimestamp : false,\n\t\t\tlevel     : 'log',\n\t\t\tlogErrors : true\n\t\t});\n\n\treduxMiddlewares.push(reduxLogger);\n}\n\nconst pReducer = persistReducer(persistConfig, rootReducer);\n\nexport const store = createStore(\n\tpReducer,\n\tapplyMiddleware(...reduxMiddlewares)\n);\n\nexport const persistor = persistStore(store);"],"sourceRoot":""}